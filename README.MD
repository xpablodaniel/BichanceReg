# üìä Bichance: Registro de Operaciones Cripto en PHP + MySQL

> Aplicaci√≥n web sencilla para registrar operaciones de compra y venta de criptomonedas, desarrollada con PHP, MySQL/MariaDB y JavaScript.

---

## ‚úÖ Funcionalidades

- Formulario web para registrar:
  - Fecha, Par, Base, Quote, Tipo (BUY/SELL)
  - Precio, Cantidad, Total, Fee y moneda del Fee
- Autocompletado de base/quote a partir del par (ej. BTC/USDT o BTCUSDT)
- C√°lculo autom√°tico del total (`precio * cantidad`)
- Uso de sentencias preparadas (`Prepared Statements`) en PHP
- Inserciones seguras y mensaje de √©xito al registrar
- Funci√≥n almacenada opcional para calcular el balance por cripto

---

## üóÉÔ∏è Estructura de Base de Datos

```sql
CREATE TABLE operaciones (
  id INT AUTO_INCREMENT PRIMARY KEY,
  fecha TEXT,
  par VARCHAR(255),
  base VARCHAR(255),
  quote VARCHAR(255),
  tipo VARCHAR(255),
  precio DOUBLE,
  cantidad DOUBLE,
  total DOUBLE,
  fee DOUBLE,
  moneda_fee VARCHAR(255)
);

CREATE INDEX idx_operaciones_base ON operaciones (base);
CREATE INDEX idx_operaciones_tipo ON operaciones (tipo);
```

---

## üìÅ Estructura del Proyecto

```bash
/bichance/
‚îú‚îÄ‚îÄ index.php       # Formulario HTML y mensajes
‚îú‚îÄ‚îÄ procesar.php    # Inserci√≥n a la base de datos
‚îú‚îÄ‚îÄ script.js       # L√≥gica din√°mica: par ‚Üí base/quote, c√°lculo total
‚îú‚îÄ‚îÄ style.css       # Estilos visuales b√°sicos
‚îú‚îÄ‚îÄ config.php      # Configuraci√≥n de conexi√≥n MySQL
```

---

## üöÄ C√≥mo Empezar

1. Crear base de datos `Bichance` en tu servidor MySQL/MariaDB.
2. Ejecutar las sentencias SQL para crear la tabla `operaciones`.
3. Configurar `config.php` con tus credenciales de conexi√≥n.
4. Colocar todos los archivos en un servidor web (por ejemplo, `htdocs/bichance/`).
5. Acceder a `index.php` desde el navegador para empezar a registrar.

---

## üß† Funci√≥n Almacenada (Opcional)

```sql
CREATE FUNCTION calcular_balance_divisa (divisa_base VARCHAR(255))
RETURNS DOUBLE
READS SQL DATA
BEGIN
  DECLARE balance DOUBLE;
  SELECT SUM(CASE WHEN tipo = 'BUY' THEN cantidad
                  WHEN tipo = 'SELL' THEN -cantidad ELSE 0 END)
    INTO balance
    FROM operaciones
    WHERE base = divisa_base;
  RETURN balance;
END;
```

Consulta con:

```sql
SELECT calcular_balance_divisa('ETH');
```

---

## üìÑ Licencia

C√≥digo abierto bajo Licencia MIT.
